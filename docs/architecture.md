# Architecture Overview

> **Version**: 1.4.0

## The Three Entities

PARA Workspace operates through three distinct entities:

### 1. Repo (Source / Governance)

The GitHub repository containing the canonical rules, tools, and templates.

```
para-workspace/
├── kernel/        # Rules (invariants + heuristics + schemas)
├── cli/           # Tools (init, scaffold, migrate, install)
├── workflows/     # Reference workflows (no state)
├── templates/     # Project/task templates + profile presets
├── docs/          # Developer documentation
└── examples/      # Reference implementations
```

**Key constraint**: The repo NEVER contains user data (`Projects/`, `Areas/`, `Resources/`, `Archive/`).

### 2. Workspace (Runtime Instance)

A local directory generated by `para init`. This is where the user and agent work daily.

```
workspace/
├── Projects/      # Active work
├── Areas/         # Stable knowledge
├── Resources/     # References & tools (includes kernel snapshot)
├── Archive/       # Cold storage
├── .agent/        # Agent runtime guardrails
└── .para-workspace.yml  # Runtime metadata
```

**Key constraint**: The workspace is a standalone instance. Multiple workspaces can exist from one repo.

### 3. Agent (Execution Environment)

The AI agent (Antigravity) attaches to a workspace and operates within its rules.

- Reads `.agent/rules/` for guardrails
- Reads `Resources/ai-agents/kernel/` for system rules
- Operates within `Projects/` for daily work

## Data Flow

```
Repo ──(para init)──> Workspace ──(agent attach)──> Agent Runtime
       <──(para install)──         <──(agent operations)──
```

- `para init`: Generates workspace from repo + profile + language
- `para install`: Syncs kernel + workflows from repo to workspace
- `para migrate`: Upgrades workspace to newer kernel version
- Agent operations: Read/write within workspace `Projects/`, `Areas/`, etc.

## Version Tracking

| Location                                | Tracks                     |
| --------------------------------------- | -------------------------- |
| Repo `VERSION`                          | Kernel version             |
| Workspace `.para-workspace.yml`         | Kernel + workspace version |
| Workspace `Resources/ai-agents/VERSION` | Snapshot version           |
