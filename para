#!/bin/bash

# PARA Workspace CLI Wrapper
# Usage: ./para [scaffold|update|work|install]

set -e

CLI_DIR="./Areas/infra/cli"
# Workspace Root is 3 levels up from the 'para' wrapper in the standard project repo
WORKSPACE_ROOT=$(realpath "../../..")
export WORKSPACE_ROOT

case "$1" in
  scaffold)
    shift
    "$CLI_DIR/scaffold.sh" "$@"
    ;;
  plan)
    shift
    "$CLI_DIR/plan.sh" "$@"
    ;;
  verify)
    shift
    "$CLI_DIR/verify.sh" "$@"
    ;;
  status)
    shift
    "$CLI_DIR/status.sh" "$@"
    ;;
  migrate)
    shift
    "$CLI_DIR/migrate.sh" "$@"
    ;;
  update)
    shift
    "$CLI_DIR/update.sh" "$@"
    ;;
  work)
    shift
    "$CLI_DIR/workflow.sh" "$@"
    ;;
  rule)
    shift
    "$CLI_DIR/rule.sh" "$@"
    ;;
  install)
    shift
    "$CLI_DIR/install.sh" "$@"
    ;;
  config)
    shift
    "$CLI_DIR/config.sh" "$@"
    ;;
  *)
    echo "Usage: ./para [command]"
    echo ""
    echo "Core Commands:"
    echo "  scaffold <name>          Create a new project"
    echo "  plan <proj> <desc>      Create an implementation plan"
    echo "  verify <proj> [desc]    Create/list walkthroughs"
    echo "  status                  Show workspace status"
    echo "  migrate <proj>         Upgrade project to v1.3"
    echo ""
    echo "System Commands:"
    echo "  update                  Update workspace templates"
    echo "  work <command>          Manage workflows (list, install)"
    echo "  rule <command>          Manage rules (list, install)"
    echo "  config <get|set|list>   Manage workspace settings"
    echo "  install                 Set up CLI permissions"
    exit 1
    ;;
esac
